<!DOCTYPE html>
<html lang="th" class="dark"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom scrollbar (optional, for WebKit browsers) */
        ::-webkit-scrollbar { width: 8px; height: 8px;}
        ::-webkit-scrollbar-track { background: #1e293b; /* Adjusted for dark sidebar */ border-radius: 10px;}
        ::-webkit-scrollbar-thumb { background: #475569; /* Adjusted for dark sidebar */ border-radius: 10px;}
        ::-webkit-scrollbar-thumb:hover { background: #64748b; /* Adjusted for dark sidebar */ }

        .sidebar-content { height: calc(100vh - 4rem); overflow-y: auto; }
        .chart-title-underline::after {
            content: ''; position: absolute; left: 50%; bottom: 0;
            transform: translateX(-50%); width: 50px; height: 3px;
            background-color: #3b82f6; border-radius: 3px;
        }
        .trend-up { color: #16a34a; } /* text-green-600 */
        .trend-down { color: #dc2626; } /* text-red-600 */

        /* For better modal backdrop */
        .modal-backdrop-custom {
            background-color: rgba(30, 41, 59, 0.5); /* bg-slate-800 opacity-50 */
        }
        body.modal-open {
            overflow: hidden;
        }
    </style>
    <script>
        // Tailwind dark mode preference
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
</head>
<body class="bg-slate-100 dark:bg-slate-900">
    <div class="flex h-screen">
        <aside class="w-64 bg-slate-800 dark:bg-slate-800 text-slate-100 flex flex-col fixed inset-y-0 left-0 z-30">
            <div class="h-16 flex items-center justify-center shadow-md bg-slate-900 dark:bg-slate-900">
                <span class="text-xl font-bold text-white">KRS Admin Panel</span>
            </div>
            <nav class="flex-grow sidebar-content p-4 space-y-2">
                <a href="#" data-page="dashboardContent" data-header-title="Dashboards" class="sidebar-nav-link group flex items-center px-3 py-2.5 text-sm font-medium rounded-md text-slate-300 hover:bg-slate-700 hover:text-white dark:text-slate-300 dark:hover:bg-slate-700 dark:hover:text-white">
                    <svg class="w-5 h-5 mr-3 flex-shrink-0 text-slate-400 group-hover:text-slate-200 dark:text-slate-400 dark:group-hover:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                    Dashboards
                </a>
                <a href="#" data-page="productContent" data-header-title="ข้อมูลสินค้า" class="sidebar-nav-link group flex items-center px-3 py-2.5 text-sm font-medium rounded-md text-slate-300 hover:bg-slate-700 hover:text-white dark:text-slate-300 dark:hover:bg-slate-700 dark:hover:text-white">
                    <svg class="w-5 h-5 mr-3 flex-shrink-0 text-slate-400 group-hover:text-slate-200 dark:text-slate-400 dark:group-hover:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h4a2 2 0 002-2V7m-4 14H8a2 2 0 01-2-2V7a2 2 0 012-2h8a2 2 0 012 2v8a2 2 0 01-2 2h-2m-4-4H9M15 11h-3"></path></svg>
                    ข้อมูลสินค้า
                </a>
                <a href="#" data-page="historyContent" data-header-title="ประวัติสต็อก" class="sidebar-nav-link group flex items-center px-3 py-2.5 text-sm font-medium rounded-md text-slate-300 hover:bg-slate-700 hover:text-white dark:text-slate-300 dark:hover:bg-slate-700 dark:hover:text-white">
                    <svg class="w-5 h-5 mr-3 flex-shrink-0 text-slate-400 group-hover:text-slate-200 dark:text-slate-400 dark:group-hover:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0l2.475 2.475M5 9l2.475 2.475M15 11V9a2 2 0 00-2-2m0 0l2.475 2.475M15 9l2.475 2.475"></path></svg>
                    ประวัติสต็อก
                </a>
                <a href="#" data-page="userManagementContent" data-header-title="การจัดการผู้ใช้"
                    class="sidebar-nav-link group flex items-center px-3 py-2.5 text-sm font-medium rounded-md text-slate-300 hover:bg-slate-700 hover:text-white dark:text-slate-300 dark:hover:bg-slate-700 dark:hover:text-white">
                    <svg class="w-5 h-5 mr-3 flex-shrink-0 text-slate-400 group-hover:text-slate-200 dark:text-slate-400 dark:group-hover:text-slate-200"
                        fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    <span class="ml-0.5">การจัดการผู้ใช้</span>
                </a>
                
                <a href="#" data-page="databaseExplorerContent" data-header-title="Database Explorer" class="sidebar-nav-link group flex items-center px-3 py-2.5 text-sm font-medium rounded-md text-slate-300 hover:bg-slate-700 hover:text-white dark:text-slate-300 dark:hover:bg-slate-700 dark:hover:text-white">
                    <svg class="w-5 h-5 mr-3 flex-shrink-0 text-slate-400 group-hover:text-slate-200 dark:text-slate-400 dark:group-hover:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                      </svg>
                    Database Explorer
                </a>
                </nav>
        </aside>

        <div class="flex-1 flex flex-col ml-64">
            <header class="bg-white dark:bg-slate-800 shadow-md h-16 flex items-center justify-between px-6 fixed top-0 left-64 right-0 z-20">
                <div class="flex items-center">
                    <div>
                        <h1 id="main-header-title" class="text-lg font-semibold text-slate-700 dark:text-slate-200">Dashboard</h1>
                        <p class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">ข้อมูลล่าสุดเมื่อ: <span id="last-updated">-</span></p>
                    </div>
                    <button id="refresh-data-btn" title="รีเฟรชข้อมูล" class="ml-4 p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">
                        <svg class="w-5 h-5 text-slate-600 dark:text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m-15.357-2a8.001 8.001 0 0015.357 2M15 15H9"></path></svg>
                    </button>
                </div>
                <div class="flex items-center">
                    <span class="text-sm text-slate-600 dark:text-slate-300 mr-3">Beta Tester</span>
                    <img class="h-8 w-8 rounded-full object-cover" src="https://via.placeholder.com/100" alt="User avatar">
                </div>
            </header>

            <main class="flex-1 pt-16 overflow-y-auto">
                <section id="dashboardContent" class="page-content-section p-4 sm:p-6 lg:p-8">
                    <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"> <div class="kpi-card bg-white dark:bg-slate-800 p-5 rounded-lg shadow flex flex-col justify-between border-l-4 border-blue-500 dark:border-blue-400"> <div class="flex items-start justify-between w-full"> <div class="flex-1"> <p class="text-xs text-slate-500 dark:text-slate-400 uppercase">ยอดซื้อรวม</p> <p id="total-revenue-value" class="text-2xl font-bold text-slate-800 dark:text-slate-100">-</p> <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">เทียบช่วงก่อน: <span id="total-revenue-trend" class="text-sm font-medium"></span></p> </div> <div class="text-blue-500 dark:text-blue-400 p-2 rounded-full bg-blue-100 dark:bg-blue-500/20 ml-2 flex-shrink-0"> <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </div> </div> </div> <div class="kpi-card bg-white dark:bg-slate-800 p-5 rounded-lg shadow flex flex-col justify-between border-l-4 border-green-500 dark:border-green-400"> <div class="flex items-start justify-between w-full"> <div class="flex-1"> <p class="text-xs text-slate-500 dark:text-slate-400 uppercase">กำไรสุทธิ</p> <p id="net-profit-value" class="text-2xl font-bold text-slate-800 dark:text-slate-100">-</p> <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">เทียบช่วงก่อน: <span id="net-profit-trend" class="text-sm font-medium"></span></p> </div> <div class="text-green-500 dark:text-green-400 p-2 rounded-full bg-green-100 dark:bg-green-500/20 ml-2 flex-shrink-0"> <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg> </div> </div> </div> <div class="kpi-card bg-white dark:bg-slate-800 p-5 rounded-lg shadow flex flex-col justify-between border-l-4 border-yellow-500 dark:border-yellow-400"> <div class="flex items-start justify-between w-full"> <div class="flex-1"> <p class="text-xs text-slate-500 dark:text-slate-400 uppercase">จำนวนสั่งซื้อรวม (หน่วย)</p> <p id="total-quantity-ordered-value" class="text-2xl font-bold text-slate-800 dark:text-slate-100">-</p> <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">เทียบช่วงก่อน: <span id="total-quantity-ordered-trend" class="text-sm font-medium"></span></p> </div> <div class="text-yellow-500 dark:text-yellow-400 p-2 rounded-full bg-yellow-100 dark:bg-yellow-500/20 ml-2 flex-shrink-0"> <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> </div> </div> </div> <div class="kpi-card bg-white dark:bg-slate-800 p-5 rounded-lg shadow flex flex-col justify-between border-l-4 border-purple-500 dark:border-purple-400"> <div class="flex items-start justify-between w-full"> <div class="flex-1"> <p class="text-xs text-slate-500 dark:text-slate-400 uppercase">ลูกค้าใหม่</p> <p id="new-customers-value" class="text-2xl font-bold text-slate-800 dark:text-slate-100">-</p> <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">เทียบช่วงก่อน: <span id="new-customers-trend" class="text-sm font-medium"></span></p> </div> <div class="text-purple-500 dark:text-purple-400 p-2 rounded-full bg-purple-100 dark:bg-purple-500/20 ml-2 flex-shrink-0"> <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.08-.986-.234-1.224a5.026 5.026 0 00-1.766-1.086M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.08-.986.234-1.224a5.026 5.026 0 011.766-1.086M12 12a3 3 0 100-6 3 3 0 000 6z"></path></svg> </div> </div> </div> </section>
                    <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"> <div class="bg-white dark:bg-slate-800 p-5 rounded-lg shadow"> <h2 class="text-lg font-semibold text-slate-700 dark:text-slate-200 mb-4 text-center relative chart-title-underline pb-3">ยอดซื้อและกำไรสุทธิรายเดือน</h2> <div style="height:300px;"> <canvas id="revenue-profit-chart"></canvas> </div> </div> <div class="bg-white dark:bg-slate-800 p-5 rounded-lg shadow"> <h2 class="text-lg font-semibold text-slate-700 dark:text-slate-200 mb-4 text-center relative chart-title-underline pb-3">ค่าใช้จ่ายรายเดือน</h2> <div style="height:300px;"> <canvas id="expenses-chart"></canvas> </div> </div> </section>
                    <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"> <div class="bg-white dark:bg-slate-800 p-5 rounded-lg shadow"> <h2 class="text-lg font-semibold text-slate-700 dark:text-slate-200 mb-4 text-center relative chart-title-underline pb-3">ยอดซื้อเทียบเป้าหมาย</h2> <div style="height:300px;"> <canvas id="revenue-target-chart"></canvas> </div> </div> <div class="bg-white dark:bg-slate-800 p-5 rounded-lg shadow"> <h2 class="text-lg font-semibold text-slate-700 dark:text-slate-200 mb-4 text-center relative chart-title-underline pb-3">จำนวนสั่งซื้อ (หน่วย) รายเดือน</h2> <div style="height:300px;"> <canvas id="quantity-ordered-chart"></canvas> </div> </div> <div class="bg-white dark:bg-slate-800 p-5 rounded-lg shadow"> <h2 class="text-lg font-semibold text-slate-700 dark:text-slate-200 mb-4 text-center relative chart-title-underline pb-3">จำนวนรับเข้า (หน่วย) รายเดือน</h2> <div style="height:300px;"> <canvas id="quantity-received-chart"></canvas> </div> </div> <div class="bg-white dark:bg-slate-800 p-5 rounded-lg shadow"> <h2 class="text-lg font-semibold text-slate-700 dark:text-slate-200 mb-4 text-center relative chart-title-underline pb-3">ส่วนลดเฉลี่ยรายเดือน</h2> <div style="height:300px;"> <canvas id="average-discount-chart"></canvas> </div> </div> </section>
                    <section class="mt-8 mb-8"> <div class="bg-white dark:bg-slate-800 p-5 sm:p-6 rounded-xl shadow-lg"> <div class="flex flex-col sm:flex-row justify-between items-center mb-4 sm:mb-6"> <h2 class="text-xl font-semibold text-slate-800 dark:text-slate-100 mb-3 sm:mb-0">Recent Activity Logs</h2> <div class="flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-2 w-full sm:w-auto"> <div class="flex items-center w-full sm:w-auto"> <label for="log-filter-user" class="text-sm text-slate-600 dark:text-slate-400 mr-2 whitespace-nowrap">User/System</label> <input type="text" id="log-filter-user" placeholder="All" class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9 w-full sm:w-32"> </div> <div class="flex items-center w-full sm:w-auto"> <label for="log-filter-type" class="text-sm text-slate-600 dark:text-slate-400 mr-2 whitespace-nowrap">Type</label> <select id="log-filter-type" name="log-filter-type" class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9 w-full"> <option value="">All Types</option> <option value="LOGIN_SUCCESS">Login Success</option> <option value="LOGIN_FAIL">Login Fail</option> <option value="USER_EDIT">User Edit</option> <option value="SYSTEM_CONFIG">System Config</option> <option value="DATA_EXPORT">Data Export</option> </select> </div> <input type="text" id="log-search-details" placeholder="Search Details..." class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9 w-full sm:w-auto"> </div> </div> <div class="overflow-x-auto"> <table class="w-full text-sm text-left text-slate-600 dark:text-slate-300"> <thead class="text-xs text-slate-700 dark:text-slate-400 uppercase bg-slate-100 dark:bg-slate-700"> <tr> <th scope="col" class="px-4 sm:px-6 py-3">Timestamp</th> <th scope="col" class="px-4 sm:px-6 py-3">User/System</th> <th scope="col" class="px-4 sm:px-6 py-3">Action Type</th> <th scope="col" class="px-4 sm:px-6 py-3">Details</th> <th scope="col" class="px-4 sm:px-6 py-3">IP Address</th> </tr> </thead> <tbody id="activity-log-table-body" class="divide-y divide-slate-200 dark:divide-slate-700"></tbody> </table> </div> <nav class="flex flex-col sm:flex-row items-center justify-between pt-4 mt-4 border-t border-slate-200 dark:border-slate-700" aria-label="Log Table navigation"> <span id="log-pagination-info" class="text-sm font-normal text-slate-500 dark:text-slate-400 mb-3 sm:mb-0">Showing <span class="font-semibold text-slate-900 dark:text-white">0-0</span> of <span class="font-semibold text-slate-900 dark:text-white">0</span></span> <ul id="log-pagination-controls" class="inline-flex items-center -space-x-px text-sm"></ul> </nav> </div> </section>
                    <section class="mt-8 mb-8"> <div class="bg-white dark:bg-slate-800 p-5 sm:p-6 rounded-xl shadow-lg"> <div class="flex flex-col sm:flex-row justify-between items-center mb-4 sm:mb-6"> <h2 class="text-xl font-semibold text-slate-800 dark:text-slate-100 mb-3 sm:mb-0">User Management (ตารางจัดการผู้ใช้ ใน Dashboard)</h2> <div class="flex items-center space-x-2 sm:space-x-4 w-full sm:w-auto"> <button id="add-new-user-btn-dashboard" class="px-4 h-9 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center"> <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Add User </button> <div class="flex items-center"> <label for="user-entries-select-dashboard" class="text-sm text-slate-600 dark:text-slate-400 mr-2 whitespace-nowrap">Show:</label> <select id="user-entries-select-dashboard" name="entries" class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9"> <option value="10">10</option> <option value="25">25</option> <option value="50">50</option> </select> <span class="text-sm text-slate-600 dark:text-slate-400 ml-2">entries</span> </div> <input type="text" id="user-table-search-dashboard" placeholder="Search Users..." class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9 w-full sm:w-auto"> </div> </div> <div class="overflow-x-auto"> <table class="w-full text-sm text-left text-slate-600 dark:text-slate-300"> <thead class="text-xs text-slate-700 dark:text-slate-400 uppercase bg-slate-100 dark:bg-slate-700"> <tr> <th scope="col" class="px-4 sm:px-6 py-3">ID</th> <th scope="col" class="px-4 sm:px-6 py-3">Name</th> <th scope="col" class="px-4 sm:px-6 py-3">Email</th> <th scope="col" class="px-4 sm:px-6 py-3">Created At</th> <th scope="col" class="px-4 sm:px-6 py-3">Role</th> <th scope="col" class="px-4 sm:px-6 py-3">Status</th> <th scope="col" class="px-4 sm:px-6 py-3 text-center">Actions</th> </tr> </thead> <tbody id="user-table-body-dashboard" class="divide-y divide-slate-200 dark:divide-slate-700"></tbody> </table> </div> <nav class="flex flex-col sm:flex-row items-center justify-between pt-4 mt-4 border-t border-slate-200 dark:border-slate-700" aria-label="User Table navigation"> <span id="user-pagination-info-dashboard" class="text-sm font-normal text-slate-500 dark:text-slate-400 mb-3 sm:mb-0">Showing 0-0 of 0</span> <ul id="user-pagination-controls-dashboard" class="inline-flex items-center -space-x-px text-sm"></ul> </nav> </div> </section>
                </section>

                <section id="productContent" class="page-content-section p-4 sm:p-6 lg:p-8" style="display:none;">
                     <h2 class="text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-6">จัดการข้อมูลสินค้า (Product Management)</h2> <div class="bg-white dark:bg-slate-800 p-5 sm:p-6 rounded-xl shadow-lg"> <div class="flex flex-col sm:flex-row justify-between items-center mb-4 sm:mb-6"> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-3 sm:mb-0">รายการสินค้า</h3> <div class="flex items-center space-x-2 sm:space-x-4 w-full sm:w-auto"> <button id="add-new-product-btn" class="px-4 h-9 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 flex items-center"> <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> เพิ่มสินค้าใหม่ </button> <div class="flex items-center"> <label for="product-entries-select" class="text-sm text-slate-600 dark:text-slate-400 mr-2 whitespace-nowrap">แสดง:</label> <select id="product-entries-select" name="product-entries" class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9"> <option value="10">10</option> <option value="25" selected>25</option> <option value="50">50</option> <option value="100">100</option> </select> <span class="text-sm text-slate-600 dark:text-slate-400 ml-2">รายการ</span> </div> <input type="text" id="product-table-search" placeholder="ค้นหาสินค้า..." class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9 w-full sm:w-auto"> </div> </div> <div class="overflow-x-auto"> <table class="w-full text-sm text-left text-slate-600 dark:text-slate-300"> <thead class="text-xs text-slate-700 dark:text-slate-400 uppercase bg-slate-100 dark:bg-slate-700"> <tr> <th scope="col" class="px-4 sm:px-6 py-3">รหัสสินค้า</th> <th scope="col" class="px-4 sm:px-6 py-3">ชื่อสินค้า</th> <th scope="col" class="px-4 sm:px-6 py-3">หมวดหมู่</th> <th scope="col" class="px-4 sm:px-6 py-3 text-right">ราคา (บาท)</th> <th scope="col" class="px-4 sm:px-6 py-3 text-right">จำนวนคงคลัง</th> <th scope="col" class="px-4 sm:px-6 py-3">สถานะ</th> <th scope="col" class="px-4 sm:px-6 py-3 text-center">จัดการ</th> </tr> </thead> <tbody id="product-table-body" class="divide-y divide-slate-200 dark:divide-slate-700"></tbody> </table> </div> <nav class="flex flex-col sm:flex-row items-center justify-between pt-4 mt-4 border-t border-slate-200 dark:border-slate-700" aria-label="Product Table navigation"> <span id="product-pagination-info" class="text-sm font-normal text-slate-500 dark:text-slate-400 mb-3 sm:mb-0">Showing 0-0 of 0</span> <ul id="product-pagination-controls" class="inline-flex items-center -space-x-px text-sm"></ul> </nav> </div>
                </section>

                <section id="historyContent" class="page-content-section p-4 sm:p-6 lg:p-8" style="display:none;">
                    <h2 class="text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-6">ประวัติสต็อกสินค้า (Stock Movement History)</h2> <div class="bg-white dark:bg-slate-800 p-5 sm:p-6 rounded-xl shadow-lg"> <div class="flex flex-col sm:flex-row justify-between items-center mb-4 sm:mb-6"> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-3 sm:mb-0">ประวัติการเคลื่อนไหว</h3> <div class="flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-2 w-full sm:w-auto"> <input type="date" id="stock-date-filter" class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9"> <select id="stock-type-filter" class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9"> <option value="">ทุกประเภท</option> <option value="IN">รับเข้า</option> <option value="OUT">ขายออก</option> <option value="ADJUST">ปรับปรุง</option> </select> <div class="flex items-center"> <label for="stock-history-entries-select" class="text-sm text-slate-600 dark:text-slate-400 mr-2 whitespace-nowrap hidden sm:inline">แสดง:</label> <select id="stock-history-entries-select" name="stock-history-entries" class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9"> <option value="15">15</option> <option value="30">30</option> <option value="50">50</option> </select> </div> <input type="text" id="stock-history-search" placeholder="ค้นหาตามสินค้า/อ้างอิง..." class="text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 h-9 w-full sm:w-auto"> </div> </div> <div class="overflow-x-auto"> <table class="w-full text-sm text-left text-slate-600 dark:text-slate-300"> <thead class="text-xs text-slate-700 dark:text-slate-400 uppercase bg-slate-100 dark:bg-slate-700"> <tr> <th scope="col" class="px-4 sm:px-6 py-3">วันที่/เวลา</th> <th scope="col" class="px-4 sm:px-6 py-3">รหัส/ชื่อสินค้า</th> <th scope="col" class="px-4 sm:px-6 py-3">ประเภท</th> <th scope="col" class="px-4 sm:px-6 py-3 text-right">จำนวน</th> <th scope="col" class="px-4 sm:px-6 py-3 text-right">คงเหลือหลังทำรายการ</th> <th scope="col" class="px-4 sm:px-6 py-3">ผู้ทำรายการ/อ้างอิง</th> </tr> </thead> <tbody id="stock-history-table-body" class="divide-y divide-slate-200 dark:divide-slate-700"></tbody> </table> </div> <nav class="flex flex-col sm:flex-row items-center justify-between pt-4 mt-4 border-t border-slate-200 dark:border-slate-700" aria-label="Stock History Table navigation"> <span id="stock-history-pagination-info" class="text-sm font-normal text-slate-500 dark:text-slate-400 mb-3 sm:mb-0">Showing 0-0 of 0</span> <ul id="stock-history-pagination-controls" class="inline-flex items-center -space-x-px text-sm"></ul> </nav> </div>
                </section>

                <section id="userManagementContent" class="page-content-section p-4 sm:p-6 lg:p-8" style="display: none;">
                    <div class="mb-6 flex flex-col sm:flex-row justify-between items-center"> <div> <h2 class="text-2xl font-semibold text-slate-800 dark:text-slate-100">การจัดการผู้ใช้</h2> <p class="text-sm text-slate-600 dark:text-slate-400">จัดการข้อมูลผู้ใช้งานระบบ</p> </div> <div class="mt-4 sm:mt-0"> <button id="addUserBtn" class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"> <svg class="w-5 h-5 mr-2 -ml-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" /> </svg> เพิ่มผู้ใช้ใหม่ </button> </div> </div> <div class="mb-4 p-4 bg-white dark:bg-slate-800 rounded-lg shadow"> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end"> <div> <label for="user-table-search-main" class="block text-sm font-medium text-slate-700 dark:text-slate-300">ค้นหาผู้ใช้:</label> <input type="text" id="user-table-search-main" placeholder="ค้นหาด้วยชื่อ, อีเมล, หรือ Username..." class="mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"> </div> <div> <label for="user-entries-select-main" class="block text-sm font-medium text-slate-700 dark:text-slate-300">แสดงจำนวน:</label> <select id="user-entries-select-main" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 dark:text-slate-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"> <option value="10">10 รายการ</option> <option value="25">25 รายการ</option> <option value="50">50 รายการ</option> <option value="100">100 รายการ</option> </select> </div> </div> </div> <div class="bg-white dark:bg-slate-800 shadow-md rounded-lg overflow-x-auto"> <table class="min-w-full divide-y divide-slate-200 dark:divide-slate-700"> <thead class="bg-slate-50 dark:bg-slate-700"> <tr> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">UserID</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">Username</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">ชื่อ-นามสกุล</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">อีเมล</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">บทบาท</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">สถานะ</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">เข้าสู่ระบบล่าสุด</th> <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider">Actions</th> </tr> </thead> <tbody id="user-table-body-main" class="bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700"> </tbody> </table> </div> <div class="mt-4 flex flex-col sm:flex-row items-center justify-between"> <div id="user-pagination-info-main" class="text-sm text-slate-700 dark:text-slate-400 mb-2 sm:mb-0"> Showing 0-0 of 0 </div> <nav> <ul id="user-pagination-controls-main" class="inline-flex items-center -space-x-px"> </ul> </nav> </div>
                </section>

                <section id="databaseExplorerContent" class="page-content-section p-4 sm:p-6 lg:p-8" style="display:none;">
                    <h2 class="text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-6">Database Explorer</h2>
                    
                    <div class="mb-4">
                        <label for="db-table-select" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">เลือกตาราง:</label>
                        <select id="db-table-select" class="mt-1 block w-full md:w-1/2 lg:w-1/3 pl-3 pr-10 py-2 text-base border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 dark:text-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm">
                            <option value="">-- กรุณาเลือกตาราง --</option>
                        </select>
                    </div>

                    <div id="dynamic-table-header-controls" class="flex items-center justify-between mt-6 mb-3">
                        <h3 id="selected-table-name-display" class="text-xl font-semibold text-slate-700 dark:text-slate-200"></h3>
                        </div>
                    
                    <div id="dynamic-table-container" class="bg-white dark:bg-slate-800 p-0 sm:p-0 rounded-xl shadow-lg overflow-x-auto">
                        <table id="dynamic-db-table" class="w-full min-w-full text-sm text-left text-slate-600 dark:text-slate-300">
                            <thead class="text-xs text-slate-700 dark:text-slate-400 uppercase bg-slate-100 dark:bg-slate-700 sticky top-0 z-10">
                                </thead>
                            <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                                </tbody>
                        </table>
                    </div>

                    <nav class="flex flex-col sm:flex-row items-center justify-between pt-4 mt-4 border-t border-slate-200 dark:border-slate-700" aria-label="Dynamic Table Navigation">
                        <span id="dynamic-db-pagination-info" class="text-sm font-normal text-slate-500 dark:text-slate-400 mb-3 sm:mb-0">Showing 0-0 of 0</span>
                        <ul id="dynamic-db-pagination-controls" class="inline-flex items-center -space-x-px text-sm"></ul>
                    </nav>
                </section>
                </main>
        </div>
    </div>

     <div id="editProductModal" class="fixed inset-0 modal-backdrop-custom overflow-y-auto h-full w-full flex items-center justify-center z-40" style="display: none;">
        <div class="relative p-5 border w-full max-w-md sm:max-w-lg md:max-w-xl shadow-lg rounded-md bg-white dark:bg-slate-800"> <div class="flex justify-between items-center pb-3 border-b dark:border-slate-600"> <p class="text-2xl font-bold text-slate-800 dark:text-slate-100">แก้ไขข้อมูลสินค้า</p> <button id="closeEditProductModalBtn" type="button" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> </button> </div> <form id="editProductForm" class="pt-4"> <input type="hidden" id="edit-product-itemcode"> <input type="hidden" id="editProductOriginalItemCode"> <div class="mb-4"> <label for="editItemCode" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">รหัสสินค้า (Item Code):</label> <input type="text" id="editItemCode" name="ItemCode" class="mt-1 block w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-slate-200 dark:bg-slate-700 dark:text-slate-400" readonly disabled> </div> <div class="mb-4"> <label for="editProductName" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">ชื่อ/รายละเอียดสินค้า: <span class="text-red-500">*</span></label> <input type="text" id="editProductName" name="ProductName" class="mt-1 block w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-50 dark:text-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required> </div> <div class="mb-4"> <label for="editCategory" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">หมวดหมู่:</label> <input type="text" id="editCategory" name="Category" class="mt-1 block w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-50 dark:text-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"> </div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"> <div> <label for="editPrice" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">ราคา (บาท): <span class="text-red-500">*</span></label> <input type="number" id="editPrice" name="Price" step="0.01" class="mt-1 block w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-50 dark:text-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required> </div> <div> <label for="editStock" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">คงคลัง: <span class="text-red-500">*</span></label> <input type="number" id="editStock" name="Stock" step="1" class="mt-1 block w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-50 dark:text-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required> </div> </div> <div class="mb-4"> <label for="editStatus" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">สถานะ: <span class="text-red-500">*</span></label> <select id="editStatus" name="Status" class="mt-1 block w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-50 dark:text-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required> <option value="วางขาย">วางขาย</option> <option value="Active">Active</option> <option value="สินค้าหมด">สินค้าหมด</option> <option value="เลิกขาย">เลิกขาย</option> <option value="ซ่อน">ซ่อน</option> </select> </div> <div class="mt-6 flex justify-end space-x-3"> <button type="button" id="cancelEditProductBtn" class="px-4 py-2 bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2"> ยกเลิก </button> <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"> บันทึกการเปลี่ยนแปลง </button> </div> </form> </div>
    </div>
    <div id="editUserModal" class="fixed inset-0 modal-backdrop-custom overflow-y-auto h-full w-full flex items-center justify-center z-[60]" style="display: none;" aria-labelledby="editUserModalTitle" role="dialog" aria-modal="true">
        <div class="relative w-full max-w-lg transform rounded-lg bg-white dark:bg-slate-800 p-4 shadow-xl transition-all duration-300 ease-in-out sm:p-6"> <div class="flex items-start justify-between rounded-t border-b dark:border-slate-600 pb-3 sm:pb-4"> <h3 class="text-lg font-semibold text-slate-900 dark:text-white sm:text-xl" id="editUserModalTitle"> แก้ไขข้อมูลผู้ใช้ </h3> <button type="button" id="closeEditUserModalBtn" class="ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-slate-400 hover:bg-slate-200 hover:text-slate-900 dark:hover:bg-slate-600 dark:hover:text-white"> <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> <span class="sr-only">Close modal</span> </button> </div> <form id="editUserForm" class="space-y-4 pt-4 sm:space-y-5 sm:pt-5"> <input type="hidden" id="editUserOriginalUserID"> <div> <label for="editUserUserID" class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-300">UserID</label> <input type="text" id="editUserUserID" name="UserID" class="block w-full rounded-lg border border-slate-300 bg-slate-200 p-2.5 text-sm text-slate-600 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-400" readonly disabled> </div> <div> <label for="editUserUsername" class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-300">Username <span class="text-red-500">*</span></label> <input type="text" id="editUserUsername" name="Username" class="block w-full rounded-lg border border-slate-300 bg-white p-2.5 text-sm text-slate-900 focus:border-blue-500 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200" required> </div> <div> <label for="editUserFullName" class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-300">ชื่อ-นามสกุล</label> <input type="text" id="editUserFullName" name="FullName" class="block w-full rounded-lg border border-slate-300 bg-white p-2.5 text-sm text-slate-900 focus:border-blue-500 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200"> </div> <div> <label for="editUserEmail" class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-300">อีเมล <span class="text-red-500">*</span></label> <input type="email" id="editUserEmail" name="Email" class="block w-full rounded-lg border border-slate-300 bg-white p-2.5 text-sm text-slate-900 focus:border-blue-500 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200" required> </div> <div> <label for="editUserRole" class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-300">บทบาท</label> <select id="editUserRole" name="Role" class="block w-full rounded-lg border border-slate-300 bg-white p-2.5 text-sm text-slate-900 focus:border-blue-500 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200"> <option value="User">User</option> <option value="Admin">Admin</option> <option value="Editor">Editor</option> </select> </div> <div> <label for="editUserStatus" class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-300">สถานะ <span class="text-red-500">*</span></label> <select id="editUserStatus" name="Status" class="block w-full rounded-lg border border-slate-300 bg-white p-2.5 text-sm text-slate-900 focus:border-blue-500 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200" required> <option value="Active">Active</option> <option value="Inactive">Inactive</option> <option value="Suspended">Suspended</option> </select> </div> <div class="flex items-center justify-end space-x-3 rounded-b border-t dark:border-slate-600 pt-4 sm:pt-5"> <button type="button" id="cancelEditUserModalBtn" class="rounded-lg border border-slate-200 dark:border-slate-500 bg-white dark:bg-slate-700 px-5 py-2.5 text-sm font-medium text-slate-500 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600 hover:text-slate-900 dark:hover:text-white focus:z-10 focus:outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-600"> ยกเลิก </button> <button type="submit" class="rounded-lg bg-blue-600 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"> บันทึกการเปลี่ยนแปลง </button> </div> </form> </div>
    </div>

    <button id="scrollToTopBtn" title="Go to top"
        class="fixed bottom-5 right-5 p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-opacity duration-300 opacity-0 pointer-events-none z-50">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>
    </button>

    <div id="toast-container" class="fixed top-5 right-5 z-[100] space-y-2"></div>

    <script src="sc.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.sidebar-nav-link');
            // IMPORTANT: Query pageSections here, after all sections are in the DOM
            const pageSections = document.querySelectorAll('.page-content-section'); 
            const mainHeaderTitle = document.getElementById('main-header-title');
            const defaultPageIdFromSC = 'dashboardContent'; 

            function setActiveLink(activeLink) {
                navLinks.forEach(link => {
                    link.classList.remove('bg-slate-700', 'text-white', 'dark:bg-slate-700');
                    link.classList.add('text-slate-300','hover:bg-slate-700', 'hover:text-white', 'dark:text-slate-300', 'dark:hover:bg-slate-700', 'dark:hover:text-white');
                });
                if (activeLink) {
                    activeLink.classList.add('bg-slate-700', 'text-white', 'dark:bg-slate-700');
                    activeLink.classList.remove('text-slate-300','hover:bg-slate-700', 'hover:text-white', 'dark:text-slate-300', 'dark:hover:bg-slate-700', 'dark:hover:text-white');
                }
            }
            
            function updateUIForPage(pageId) {
                const activeLink = document.querySelector(`.sidebar-nav-link[data-page="${pageId}"]`);
                if (activeLink) {
                    const headerTitle = activeLink.dataset.headerTitle || activeLink.textContent.trim().replace(/\s+/g, ' ');
                    mainHeaderTitle.textContent = headerTitle;
                    setActiveLink(activeLink);
                } else if (pageId === defaultPageIdFromSC) { 
                    mainHeaderTitle.textContent = "Dashboards"; 
                    const defaultLink = document.querySelector(`.sidebar-nav-link[data-page="${defaultPageIdFromSC}"]`);
                    if (defaultLink) setActiveLink(defaultLink);
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const pageId = link.getAttribute('data-page');
                    const pageChangeEvent = new CustomEvent('pageChangeRequested', { detail: { pageId: pageId } });
                    document.dispatchEvent(pageChangeEvent);
                });
            });

            document.addEventListener('pageChangedByScript', (event) => {
                const pageId = event.detail.pageId;
                updateUIForPage(pageId);
            });
            
            // The initial page display (including its UI update) should be handled by sc.js
            // when it determines the initialPageId and calls showPage().
            // showPage() should then dispatch 'pageChangedByScript'.
        });
    </script>
</body>
</html>